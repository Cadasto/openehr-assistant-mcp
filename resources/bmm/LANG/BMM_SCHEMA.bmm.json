{
    "name": "BMM_SCHEMA",
    "documentation": "Abstract parent of any persistable form of a BMM model, e.g. `P_BMM_SCHEMA`.",
    "is_abstract": true,
    "ancestors": [
        "BMM_MODEL_METADATA"
    ],
    "properties": {
        "bmm_version": {
            "_type": "P_BMM_SINGLE_PROPERTY",
            "name": "bmm_version",
            "documentation": "Version of BMM model, enabling schema evolution reasoning. Persisted attribute.",
            "is_mandatory": true,
            "type": "String"
        },
        "includes": {
            "_type": "P_BMM_GENERIC_PROPERTY",
            "name": "includes",
            "documentation": "Inclusion list of any form of BMM model, in the form of a hash of individual include specifications, each of which at least specifies the id of another schema, and may specify a namespace via which types from the included schemas are known in this schema.\nPersisted attribute.",
            "type_def": {
                "root_type": "Hash",
                "generic_parameters": [
                    "String",
                    "BMM_INCLUDE_SPEC"
                ]
            }
        },
        "bmm_model": {
            "_type": "P_BMM_SINGLE_PROPERTY",
            "name": "bmm_model",
            "documentation": "Generated by `_create_bmm_model_` from persisted elements.",
            "type": "BMM_MODEL"
        },
        "state": {
            "_type": "P_BMM_SINGLE_PROPERTY",
            "name": "state",
            "documentation": "Current processing state.",
            "is_mandatory": true,
            "type": "BMM_SCHEMA_STATE"
        },
        "model_name": {
            "_type": "P_BMM_SINGLE_PROPERTY",
            "name": "model_name",
            "documentation": "Name of this model, if this schema is a model root point. Not set for sub-schemas that are not considered models on their own.",
            "type": "String"
        },
        "schema_name": {
            "_type": "P_BMM_SINGLE_PROPERTY",
            "name": "schema_name",
            "documentation": "Name of model expressed in schema; a 'schema' usually contains all of the packages of one 'model' of a publisher. A publisher with more than one model can have multiple schemas. ",
            "is_mandatory": true,
            "type": "String"
        },
        "schema_revision": {
            "_type": "P_BMM_SINGLE_PROPERTY",
            "name": "schema_revision",
            "documentation": "Revision of schema.",
            "is_mandatory": true,
            "type": "String"
        },
        "schema_lifecycle_state": {
            "_type": "P_BMM_SINGLE_PROPERTY",
            "name": "schema_lifecycle_state",
            "documentation": "Schema development lifecycle state. ",
            "is_mandatory": true,
            "type": "String"
        },
        "schema_author": {
            "_type": "P_BMM_SINGLE_PROPERTY",
            "name": "schema_author",
            "documentation": "Primary author of schema. ",
            "is_mandatory": true,
            "type": "String"
        },
        "schema_description": {
            "_type": "P_BMM_SINGLE_PROPERTY",
            "name": "schema_description",
            "documentation": "Description of schema. ",
            "is_mandatory": true,
            "type": "String"
        },
        "schema_contributors": {
            "_type": "P_BMM_CONTAINER_PROPERTY",
            "name": "schema_contributors",
            "documentation": "Contributing authors of schema. ",
            "type_def": {
                "container_type": "List",
                "type": "String"
            },
            "cardinality": {
                "lower": 0,
                "upper_unbounded": true
            }
        }
    },
    "functions": {
        "validate_created": {
            "name": "validate_created",
            "documentation": "Do some basic validation post initial creation\n\n* check that package structure is regular:\n** only top-level packages can have qualified names\n** no top-level package name can be a direct parent or child of another (child package must be declared under the parent)\n* check that all classes are mentioned in the package structure\n* check that all models refer to valid packages",
            "is_abstract": true,
            "pre_conditions": {
                "Pre_state": "state = State_created"
            },
            "post_conditions": {
                "Post_state": "passed implies state = State_validated_created"
            },
            "result": {
                "_type": "P_BMM_SIMPLE_TYPE",
                "type": "void"
            }
        },
        "load_finalise": {
            "name": "load_finalise",
            "documentation": "Finalisation work:\n\n* convert packages to canonical form, i.e. full hierarchy with no packages with names like aa.bb.cc\n* set up include processing list",
            "is_abstract": true,
            "pre_conditions": {
                "Pre_state": "state = State_validated_created"
            },
            "post_conditions": {
                "Post_state": "state = State_includes_processed or state = State_includes_pending"
            },
            "result": {
                "_type": "P_BMM_SIMPLE_TYPE",
                "type": "void"
            }
        },
        "merge": {
            "name": "merge",
            "documentation": "Merge in class and package definitions from `_other_`, except where the current schema already has a definition for the given type or package.",
            "is_abstract": true,
            "parameters": {
                "other": {
                    "_type": "P_BMM_SINGLE_FUNCTION_PARAMETER",
                    "name": "other",
                    "type": "BMM_SCHEMA"
                }
            },
            "pre_conditions": {
                "Pre_state": "state = State_includes_pending",
                "Pre_other_valid": "includes_to_process.has (included_schema.schema_id)"
            },
            "result": {
                "_type": "P_BMM_SIMPLE_TYPE",
                "type": "void"
            }
        },
        "validate": {
            "name": "validate",
            "documentation": "Main validation prior to generation of `_bmm_model_`.",
            "is_abstract": true,
            "result": {
                "_type": "P_BMM_SIMPLE_TYPE",
                "type": "void"
            }
        },
        "create_bmm_model": {
            "name": "create_bmm_model",
            "documentation": "Populate `_bmm_model_` from schema.",
            "is_abstract": true,
            "pre_conditions": {
                "Pre_state": "state = P_BMM_PACKAGE_STATE.State_includes_processed"
            },
            "result": {
                "_type": "P_BMM_SIMPLE_TYPE",
                "type": "void"
            }
        },
        "read_to_validate": {
            "name": "read_to_validate",
            "documentation": "True when validation may be commenced.",
            "post_conditions": {
                "Post_state": "state = State_includes_processed"
            },
            "result": {
                "_type": "P_BMM_SIMPLE_TYPE",
                "type": "Boolean"
            }
        },
        "schema_id": {
            "name": "schema_id",
            "documentation": "Identifier of this schema, used for stating inclusions and identifying files. Formed as:\n\n`{BMM_DEFINITIONS}.create_schema_id ( _rm_publisher_,  _schema_name_,   _rm_release_)`\n\nE.g. `\"openehr_rm_ehr_1.0.4\"`.",
            "result": {
                "_type": "P_BMM_SIMPLE_TYPE",
                "type": "String"
            }
        }
    },
    "package": "org.openehr.lang.bmm.model_access",
    "specUrl": "https://specifications.openehr.org/releases/LANG/development/bmm.html#_model_access_package"
}