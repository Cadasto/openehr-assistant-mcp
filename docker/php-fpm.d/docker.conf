[global]
error_log = /proc/self/fd/2

; Ensure FPM doesn't buffer logs
log_limit = 8192

[www]
; Listen on port 9000 for Caddy
listen = 9000

; Access logging to stderr
access.log = /proc/self/fd/2

; Process Management
; 'static' is often preferred in Docker to prevent scaling overhead
; and ensure predictable memory usage.
pm = dynamic
pm.max_children = 20
pm.start_servers = 3
pm.min_spare_servers = 1
pm.max_spare_servers = 5
pm.max_requests = 1000

; Health Check: Enable the ping page so Caddy or Docker can monitor health
ping.path = /health/status
ping.response = ok

; Security & Cleanliness
catch_workers_output = yes
decorate_workers_output = no
clear_env = no

; Ensure we only process .php files
security.limit_extensions = .php
